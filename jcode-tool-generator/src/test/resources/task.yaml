packageName: ${groupId}.${appName}${preBizName}.domain.logic.task${postBizName}
name: ${entity.simpleClassName}Task

classAnnotations:
  - type: org.springframework.stereotype.Service
  - type: javax.transaction.Transactional

fields:
  - name: ${appName}Store
    type: ${groupId}.${appName}.domain.store.${entity.simpleClassName}Store
    annotations:
      - org.springframework.beans.factory.annotation.Autowired

methods:
  - name: find${entity.simpleClassName}
    type: ${entity.className}
    access: PUBLIC
    parameters:
      - type: String
        varName: ${entity.name}Id
    body: |
      ${entity.simpleClassName} ${entity.name} = ${entity.name}Store.retrieve(talkId);
      if(${entity.name} == null) {
          throw new NoSuchElementException("${entity.simpleClassName} id: " + ${entity.name}Id);
      }
      return ${entity.name};

  - name: modify${entity.simpleClassName}
    access: PUBLIC
    parameters:
      - type: String
        varName: ${entity.name}Id
      - type: io.naraplatform.share.domain.NameValueList
        varName: nameValues
    body: |
      ${entity.simpleClassName} ${entity.name} = ${entity.name}Store.retrieve(${entity.name}Id);
      ${entity.name}.setValues(nameValues);
      ${entity.name}Store.update(${entity.name});

  - name: modify${entity.simpleClassName}
    access: PUBLIC
    parameters:
      - type: ${entity.className}
    body: ${entity.name}Store.update(${entity.name});

  - name: remove${entity.simpleClassName}
    access: PUBLIC
    parameters:
      - type: String
        varName: ${entity.name}Id
    body: |
      ${entity.simpleClassName} ${entity.name} = ${entity.name}Store.retrieve(${entity.name}Id);
      ${entity.name}Store.delete(${entity.name});